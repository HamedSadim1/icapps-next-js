// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Admin {
  id               String            @id @default(auto()) @map("_id") @db.ObjectId
  name             String            @unique
  email            String            @unique
  startdate        DateTime          @default(now())
  enddate          DateTime?
  stageBegeleiders StageBegeleider[]
  stagiairs        Stagiair[]
  stages           Stage[]
}

model User {
  id        String    @id @default(auto()) @map("_id") @db.ObjectId
  name      String    @unique
  email     String    @unique
  startdate DateTime  @default(now())
  enddate   DateTime?
  role      UserRole  @default(ADMIN)
}

enum UserRole {
  ADMIN
  STAGIAIR
  STAGEBEGELEIDER
}

model StageBegeleider {
  id        String     @id @default(auto()) @map("_id") @db.ObjectId
  username  String     @unique
  email     String     @unique
  role      UserRole   @default(STAGEBEGELEIDER)
  stages    Stage[]
  stagiairs Stagiair[]
  adminId   String     @db.ObjectId
  admin     Admin      @relation(fields: [adminId], references: [id])
}

model Stagiair {
  id                String          @id @default(auto()) @map("_id") @db.ObjectId
  name              String          @unique
  email             String          @unique
  role              UserRole        @default(STAGIAIR)
  stages            Stage[]
  stagebegeleiderId String          @db.ObjectId
  stagebegeleider   StageBegeleider @relation(fields: [stagebegeleiderId], references: [id])
  adminId           String          @db.ObjectId
  admin             Admin           @relation(fields: [adminId], references: [id])
}

model Stage {
  id                String          @id @default(auto()) @map("_id") @db.ObjectId
  beschrijving      String
  school            String
  stagebegeleiderId String          @db.ObjectId
  stagebegeleider   StageBegeleider @relation(fields: [stagebegeleiderId], references: [id])
  stagiairId        String          @db.ObjectId
  stagiair          Stagiair        @relation(fields: [stagiairId], references: [id])
  adminId           String          @db.ObjectId
  admin             Admin           @relation(fields: [adminId], references: [id])
}
